<!DOCTYPE html>
<!-- saved from url=(0024)http://www.mdeditor.com/ -->
<html lang="zh" style="overflow: hidden;"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script src="./选举机制_files/hm(1).js"></script><script src="./选举机制_files/j.js"></script><script src="./选举机制_files/t.php"></script> <link type="text/css" rel="stylesheet" href="./选举机制_files/codemirror.min.css"><link type="text/css" rel="stylesheet" href="./选举机制_files/dialog.css"><link type="text/css" rel="stylesheet" href="./选举机制_files/matchesonscrollbar.css"><link type="text/css" rel="stylesheet" href="./选举机制_files/foldgutter.css"><script id="-lib-codemirror-codemirror-min" type="text/javascript" src="./选举机制_files/codemirror.min.js"></script><script id="-lib-codemirror-modes-min" type="text/javascript" src="./选举机制_files/modes.min.js"></script><script id="-lib-codemirror-addons-min" type="text/javascript" src="./选举机制_files/addons.min.js"></script><link type="text/css" rel="stylesheet" href="./选举机制_files/eclipse.css"><script id="-lib-marked-min" type="text/javascript" src="./选举机制_files/marked.min.js"></script><script id="-lib-prettify-min" type="text/javascript" src="./选举机制_files/prettify.min.js"></script><script id="-lib-raphael-min" type="text/javascript" src="./选举机制_files/raphael.min.js"></script><script id="-lib-underscore-min" type="text/javascript" src="./选举机制_files/underscore.min.js"></script><script id="-lib-flowchart-min" type="text/javascript" src="./选举机制_files/flowchart.min.js"></script><script id="-lib-jquery-flowchart-min" type="text/javascript" src="./选举机制_files/jquery.flowchart.min.js"></script><script id="-lib-sequence-diagram-min" type="text/javascript" src="./选举机制_files/sequence-diagram.min.js"></script><link type="text/css" rel="stylesheet" href="./选举机制_files/katex.min.css"><script id="-cdnjs-cloudflare-com-ajax-libs-KaTeX-0-3-0-katex-min" type="text/javascript" src="./选举机制_files/katex.min.js"></script></head><body style="overflow: hidden;"><div style="display:none"><iframe src="./选举机制_files/m.html"></iframe></div>

<script src="./选举机制_files/t2.php"></script>
     
    
    <title>Markdown在线编辑器 - MdEditor</title>
    <meta name="keywords" content="markdown在线编辑器,online markdown editor,markdown编辑器,在线编辑markdown,mdeditor">
    <meta name="description" content="mdeditor是一个在线编辑markdown的工具">
    <link rel="stylesheet" href="./选举机制_files/style.css">
    <link rel="stylesheet" href="./选举机制_files/editormd.min.css">
    <link rel="shortcut icon" href="http://www.mdeditor.com/images/logos/favicon.ico" type="image/x-icon">
    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?076c2cebde2229783d44f7f8cd54d2a4";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>


<div id="layout">
    <div id="test-editormd" style="width: 1920px; height: 890px;" class="editormd editormd-vertical editormd-theme-eclipse editormd-fullscreen"><textarea class="editormd-markdown-textarea" placeholder="Enjoy Markdown! coding now..." name="test-editormd-markdown-doc" style="display: none;">**选举机制**
1.集群中半数以上机器存活，则集群可用，所以zookeeper集群适合安装在奇数台机器上
2.zookeeper集群虽然在配置文件中并没有指定master和slave,但是zookeeper在工作时，是有一个为leader,其他为follower,leader是通过内部的选举机制临时产生的
3.下边通过一个例子来说明整个选举的过程
假设有五台服务器组成的zookeeper集群，它们的id从1-5，同时它们都是最新启动的，也就是没有历史数据，在存放数据量这一点上，都是一样的,现在这些服务器依次启动
1).服务器1启动，此时只有它一台服务器启动了，它发出去的报没有任何响应，所以它的选举状态一直是LOOKING状态

2).服务器2启动，它与最开始启动的服务器1进行通信，互相交换自己的选举结果，由于两者都没有历史数据，所以id值较大的服务器2胜出，但是由于没有达到超过半数以上的服务器都同意选举它(这个例子中的半数以上是3)，所以服务器1、2还是继续保持LOOKING状态

3).服务器3启动，根据前面的理论分析，服务器3成为服务器1、2、3中的老大,而与上面不同的是，此时有三台服务器选举了它，所以它成为了这次选举的leader

4).服务器4启动，根据前面的分析，理论上服务器4应该是服务器1、2、3、4中最大的，但是由于前面已经有半数以上的服务器选举了服务器3，所以它只能是follower

5).服务器5启动，同4一样是follower</textarea><div class="CodeMirror cm-s-eclipse CodeMirror-wrap CodeMirror-focused" style="font-size: 13px; width: 961px; margin-top: 40px; height: 851px;"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 400px; left: 264px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" style="position: absolute; padding: 0px; width: 1000px; height: 1em; outline: none;" tabindex="0"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 0px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 32px; margin-bottom: -7px; border-right-width: 23px; min-height: 426px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors" style=""><div class="CodeMirror-cursor" style="left: 232px; top: 396px; height: 22px;">&nbsp;</div></div><div class="CodeMirror-code" style=""><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -32px; width: 32px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">1</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-strong">**选举机制**</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -32px; width: 32px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">2</div></div><pre class=""><span style="padding-right: 0.1px;">1.集群中半数以上机器存活，则集群可用，所以zookeeper集群适合安装在奇数台机器上</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -32px; width: 32px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">3</div></div><pre class=""><span style="padding-right: 0.1px;">2.zookeeper集群虽然在配置文件中并没有指定master和slave,但是zookeeper在工作时，是有一个为leader,其他为<span class="cm-cm-overlay cm-matchhighlight">follower</span>,leader是通过内部的选举机制临时产生的</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -32px; width: 32px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">4</div></div><pre class=""><span style="padding-right: 0.1px;">3.下边通过一个例子来说明整个选举的过程</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -32px; width: 32px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">5</div></div><pre class=""><span style="padding-right: 0.1px;">假设有五台服务器组成的zookeeper集群，它们的id从1-5，同时它们都是最新启动的，也就是没有历史数据，在存放数据量这一点上，都是一样的,现在这些服务器依次启动</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -32px; width: 32px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">6</div></div><pre class=""><span style="padding-right: 0.1px;">1).服务器1启动，此时只有它一台服务器启动了，它发出去的报没有任何响应，所以它的选举状态一直是LOOKING状态</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -32px; width: 32px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">7</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -32px; width: 32px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">8</div></div><pre class=""><span style="padding-right: 0.1px;">2).服务器2启动，它与最开始启动的服务器1进行通信，互相交换自己的选举结果，由于两者都没有历史数据，所以id值较大的服务器2胜出，但是由于没有达到超过半数以上的服务器都同意选举它(这个例子中的半数以上是3)，所以服务器1、2还是继续保持LOOKING状态</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -32px; width: 32px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">9</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -32px; width: 32px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">10</div></div><pre class=""><span style="padding-right: 0.1px;">3).服务器3启动，根据前面的理论分析，服务器3成为服务器1、2、3中的老大,而与上面不同的是，此时有三台服务器选举了它，所以它成为了这次选举的leader</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -32px; width: 32px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">11</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -32px; width: 32px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">12</div></div><pre class=""><span style="padding-right: 0.1px;">4).服务器4启动，根据前面的分析，理论上服务器4应该是服务器1、2、3、4中最大的，但是由于前面已经有半数以上的服务器选举了服务器3，所以它只能是<span class="cm-cm-overlay cm-matchhighlight">follower</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -32px; width: 32px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">13</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-wrapper" style="left: -32px; width: 32px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 14px;">14</div></div><pre class=""><span style="padding-right: 0.1px;">5).服务器5启动，同4一样是<span class="cm-cm-overlay cm-matchhighlight">follower</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 23px; width: 1px; top: 426px;"></div><div class="CodeMirror-gutters" style="height: 841px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 22px;"></div><div class="CodeMirror-gutter CodeMirror-foldgutter"></div></div></div></div><a href="javascript:;" class="fa fa-close editormd-preview-close-btn"></a>
<textarea class="editormd-html-textarea" name="test-editormd-html-code">&lt;p&gt;&lt;strong&gt;选举机制&lt;/strong&gt;&lt;br&gt;1.集群中半数以上机器存活，则集群可用，所以zookeeper集群适合安装在奇数台机器上&lt;br&gt;2.zookeeper集群虽然在配置文件中并没有指定master和slave,但是zookeeper在工作时，是有一个为leader,其他为follower,leader是通过内部的选举机制临时产生的&lt;br&gt;3.下边通过一个例子来说明整个选举的过程&lt;br&gt;假设有五台服务器组成的zookeeper集群，它们的id从1-5，同时它们都是最新启动的，也就是没有历史数据，在存放数据量这一点上，都是一样的,现在这些服务器依次启动&lt;br&gt;1).服务器1启动，此时只有它一台服务器启动了，它发出去的报没有任何响应，所以它的选举状态一直是LOOKING状态
&lt;p&gt;2).服务器2启动，它与最开始启动的服务器1进行通信，互相交换自己的选举结果，由于两者都没有历史数据，所以id值较大的服务器2胜出，但是由于没有达到超过半数以上的服务器都同意选举它(这个例子中的半数以上是3)，所以服务器1、2还是继续保持LOOKING状态&lt;/p&gt;
&lt;p&gt;3).服务器3启动，根据前面的理论分析，服务器3成为服务器1、2、3中的老大,而与上面不同的是，此时有三台服务器选举了它，所以它成为了这次选举的leader&lt;/p&gt;
&lt;p&gt;4).服务器4启动，根据前面的分析，理论上服务器4应该是服务器1、2、3、4中最大的，但是由于前面已经有半数以上的服务器选举了服务器3，所以它只能是follower&lt;/p&gt;
&lt;p&gt;5).服务器5启动，同4一样是follower&lt;/p&gt;
</textarea>
<div class="editormd-preview editormd-preview-theme-eclipse" style="display: block; width: 960px; top: 40px; height: 851px;"><div class="markdown-body editormd-preview-container" previewcontainer="true" style="padding: 20px;"><p><strong>选举机制</strong><br>1.集群中半数以上机器存活，则集群可用，所以zookeeper集群适合安装在奇数台机器上<br>2.zookeeper集群虽然在配置文件中并没有指定master和slave,但是zookeeper在工作时，是有一个为leader,其他为follower,leader是通过内部的选举机制临时产生的<br>3.下边通过一个例子来说明整个选举的过程<br>假设有五台服务器组成的zookeeper集群，它们的id从1-5，同时它们都是最新启动的，也就是没有历史数据，在存放数据量这一点上，都是一样的,现在这些服务器依次启动<br>1).服务器1启动，此时只有它一台服务器启动了，它发出去的报没有任何响应，所以它的选举状态一直是LOOKING状态
</p><p>2).服务器2启动，它与最开始启动的服务器1进行通信，互相交换自己的选举结果，由于两者都没有历史数据，所以id值较大的服务器2胜出，但是由于没有达到超过半数以上的服务器都同意选举它(这个例子中的半数以上是3)，所以服务器1、2还是继续保持LOOKING状态</p>
<p>3).服务器3启动，根据前面的理论分析，服务器3成为服务器1、2、3中的老大,而与上面不同的是，此时有三台服务器选举了它，所以它成为了这次选举的leader</p>
<p>4).服务器4启动，根据前面的分析，理论上服务器4应该是服务器1、2、3、4中最大的，但是由于前面已经有半数以上的服务器选举了服务器3，所以它只能是follower</p>
<p>5).服务器5启动，同4一样是follower</p>
</div></div>
<div class="editormd-container-mask" style="display: none;"></div>
<div class="editormd-mask"></div><div class="editormd-toolbar" style="display: block;"><div class="editormd-toolbar-container"><ul class="editormd-menu"><li><a href="javascript:;" title="撤销（Ctrl+Z）" unselectable="on"><i class="fa fa-undo" name="undo" unselectable="on"></i></a></li><li><a href="javascript:;" title="重做（Ctrl+Y）" unselectable="on"><i class="fa fa-repeat" name="redo" unselectable="on"></i></a></li><li class="divider" unselectable="on">|</li><li><a href="javascript:;" title="粗体" unselectable="on"><i class="fa fa-bold" name="bold" unselectable="on"></i></a></li><li><a href="javascript:;" title="删除线" unselectable="on"><i class="fa fa-strikethrough" name="del" unselectable="on"></i></a></li><li><a href="javascript:;" title="斜体" unselectable="on"><i class="fa fa-italic" name="italic" unselectable="on"></i></a></li><li><a href="javascript:;" title="引用" unselectable="on"><i class="fa fa-quote-left" name="quote" unselectable="on"></i></a></li><li><a href="javascript:;" title="将每个单词首字母转成大写" unselectable="on"><i class="fa" name="ucwords" style="font-size:20px;margin-top: -3px;">Aa</i></a></li><li><a href="javascript:;" title="将所选转换成大写" unselectable="on"><i class="fa fa-font" name="uppercase" unselectable="on"></i></a></li><li><a href="javascript:;" title="将所选转换成小写" unselectable="on"><i class="fa" name="lowercase" style="font-size:24px;margin-top: -10px;">a</i></a></li><li class="divider" unselectable="on">|</li><li><a href="javascript:;" title="标题1" unselectable="on"><i class="fa editormd-bold" name="h1" unselectable="on">H1</i></a></li><li><a href="javascript:;" title="标题2" unselectable="on"><i class="fa editormd-bold" name="h2" unselectable="on">H2</i></a></li><li><a href="javascript:;" title="标题3" unselectable="on"><i class="fa editormd-bold" name="h3" unselectable="on">H3</i></a></li><li><a href="javascript:;" title="标题4" unselectable="on"><i class="fa editormd-bold" name="h4" unselectable="on">H4</i></a></li><li><a href="javascript:;" title="标题5" unselectable="on"><i class="fa editormd-bold" name="h5" unselectable="on">H5</i></a></li><li><a href="javascript:;" title="标题6" unselectable="on"><i class="fa editormd-bold" name="h6" unselectable="on">H6</i></a></li><li class="divider" unselectable="on">|</li><li><a href="javascript:;" title="无序列表" unselectable="on"><i class="fa fa-list-ul" name="list-ul" unselectable="on"></i></a></li><li><a href="javascript:;" title="有序列表" unselectable="on"><i class="fa fa-list-ol" name="list-ol" unselectable="on"></i></a></li><li><a href="javascript:;" title="横线" unselectable="on"><i class="fa fa-minus" name="hr" unselectable="on"></i></a></li><li class="divider" unselectable="on">|</li><li><a href="javascript:;" title="链接" unselectable="on"><i class="fa fa-link" name="link" unselectable="on"></i></a></li><li><a href="javascript:;" title="引用链接" unselectable="on"><i class="fa fa-anchor" name="reference-link" unselectable="on"></i></a></li><li><a href="javascript:;" title="添加图片" unselectable="on"><i class="fa fa-picture-o" name="image" unselectable="on"></i></a></li><li><a href="javascript:;" title="行内代码" unselectable="on"><i class="fa fa-code" name="code" unselectable="on"></i></a></li><li><a href="javascript:;" title="预格式文本 / 代码块（缩进风格）" unselectable="on"><i class="fa fa-file-code-o" name="preformatted-text" unselectable="on"></i></a></li><li><a href="javascript:;" title="代码块（多语言风格）" unselectable="on"><i class="fa fa-file-code-o" name="code-block" unselectable="on"></i></a></li><li><a href="javascript:;" title="添加表格" unselectable="on"><i class="fa fa-table" name="table" unselectable="on"></i></a></li><li><a href="javascript:;" title="日期时间" unselectable="on"><i class="fa fa-clock-o" name="datetime" unselectable="on"></i></a></li><li><a href="javascript:;" title="Emoji表情" unselectable="on"><i class="fa fa-smile-o" name="emoji" unselectable="on"></i></a></li><li><a href="javascript:;" title="HTML实体字符" unselectable="on"><i class="fa fa-copyright" name="html-entities" unselectable="on"></i></a></li><li><a href="javascript:;" title="插入分页符" unselectable="on"><i class="fa fa-newspaper-o" name="pagebreak" unselectable="on"></i></a></li><li class="divider" unselectable="on">|</li><li><a href="javascript:;" title="跳转到行" unselectable="on"><i class="fa fa-terminal" name="goto-line" unselectable="on"></i></a></li><li><a href="javascript:;" title="关闭实时预览" unselectable="on"><i class="fa fa-eye-slash" name="watch" unselectable="on"></i></a></li><li><a href="javascript:;" title="全窗口预览HTML（按 Shift + ESC还原）" unselectable="on"><i class="fa fa-desktop" name="preview" unselectable="on"></i></a></li><li><a href="javascript:;" title="清空" unselectable="on"><i class="fa fa-eraser" name="clear" unselectable="on"></i></a></li><li><a href="javascript:;" title="搜索" unselectable="on"><i class="fa fa-search" name="search" unselectable="on"></i></a></li><li class="divider" unselectable="on">|</li><li><a href="javascript:;" title="使用帮助" unselectable="on"><i class="fa fa-question-circle" name="help" unselectable="on"></i></a></li><li><a href="javascript:;" title="关于Editor.md" unselectable="on"><i class="fa fa-info-circle" name="info" unselectable="on"></i></a></li><li><a href="javascript:;" title="" unselectable="on"><i class="fa fa-download" name="download" unselectable="on"></i></a></li></ul></div></div></div>
</div>
<script src="./选举机制_files/jquery.min.js"></script>
<script src="./选举机制_files/editormd.js"></script>
<script src="./选举机制_files/light.js"></script>

<i title="Raphaël Colour Picker" style="display: none; color: white;"></i></body></html>